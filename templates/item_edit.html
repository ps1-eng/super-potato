{% extends 'base.html' %}

{% block content %}
<section class="card">
  <div class="item-header">
    <h2>Edit item</h2>
    <a class="link" href="{{ url_for('item_detail', item_id=item.id) }}">Back to item</a>
  </div>
  <form class="grid" method="post" action="{{ url_for('edit_item', item_id=item.id) }}">
    <label>
      Item name
      <input type="text" name="name" value="{{ item.name }}" required />
    </label>
    <label>
      Description (optional)
      <input type="text" name="description" value="{{ item.description or '' }}" />
    </label>
    <label>
      SKU (optional)
      <input type="text" name="sku" value="{{ item.sku or '' }}" />
    </label>
    <label>
      Purchase price (â‚¬)
      <input type="number" step="0.01" name="purchase_price" value="{{ item.purchase_price }}" required />
    </label>
    <label>
      Purchase date
      <input
        type="date"
        name="purchase_date"
        class="date-input"
        placeholder="26/03/2024"
        value="{{ item.purchase_date | today_input }}"
        required
      />
    </label>
    <label>
      Purchase source
      <input
        type="text"
        name="purchase_source"
        list="purchase-sources"
        value="{{ item.purchase_source }}"
        required
      />
    </label>
    <label>
      Status
      <select name="status">
        {% for option in statuses %}
          <option value="{{ option }}" {% if option == item.status %}selected{% endif %}>{{ option }}</option>
        {% endfor %}
      </select>
    </label>
    <label>
      Listed date (optional)
      <input
        type="date"
        name="listed_date"
        class="date-input"
        placeholder="26/03/2024"
        value="{{ item.listed_date | today_input if item.listed_date else '' }}"
      />
    </label>
    <label class="span-2">
      Notes (optional)
      <textarea name="notes" rows="2">{{ item.notes or '' }}</textarea>
    </label>
    <button type="submit" class="primary">Save changes</button>
  </form>
  <datalist id="purchase-sources">
    {% for source in purchase_sources %}
      <option value="{{ source }}"></option>
    {% endfor %}
  </datalist>
</section>
{% endblock %}
